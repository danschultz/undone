{"dependencies":[{"id":"dart.core","uri":"dart-sdk/lib/core/core.dart","name":"dart:core","children":[{"id":"Object","comment":"\nEverything in Dart is an [Object].\n","uri":"dart-sdk/lib/core/object.dart","name":"Object","children":[{"returnType":{"refId":"dart.core/bool","name":"bool"},"isOperator":true,"id":"==1()","comment":"\nThe equality operator.\n\nThe default behavior for all [Object]s is to return true if and\nonly if [:this:] and [other] are the same object.\n\nIf a subclass overrides the equality operator it should override\nthe [hashCode] method as well to maintain consistency.\n","name":"==","children":[{"id":"other","name":"other","kind":"param"}],"line":"29","kind":"method"},{"returnType":{"refId":"dart.core/String","name":"String"},"id":"toString0()","comment":"\nReturns a string representation of this object.\n","name":"toString","line":"48","kind":"method"},{"id":"noSuchMethod1()","comment":"\n[noSuchMethod] is invoked when users invoke a non-existant method\non an object. The name of the method and the arguments of the\ninvocation are passed to [noSuchMethod] in an [Invocation].\nIf [noSuchMethod] returns a value, that value becomes the result of\nthe original invocation.\n\nThe default behavior of [noSuchMethod] is to throw a\n[noSuchMethodError].\n","name":"noSuchMethod","children":[{"ref":{"refId":"dart.core/Invocation","name":"Invocation"},"id":"invocation","name":"invocation","kind":"param"}],"line":"60","kind":"method"},{"ref":{"refId":"dart.core/int","name":"int"},"id":"hashCode","comment":"\nGet a hash code for this object.\n\nAll objects have hash codes. Hash codes are guaranteed to be the\nsame for objects that are equal when compared using the equality\noperator [:==:]. Other than that there are no guarantees about\nthe hash codes. They will not be consistent between runs and\nthere are no distribution guarantees.\n\nIf a subclass overrides [hashCode] it should override the\nequality operator as well to maintain consistency.\n","name":"hashCode","line":"43","kind":"property"},{"ref":{"refId":"dart.core/Type","name":"Type"},"id":"runtimeType","comment":"\nA representation of the runtime type of the object.\n","name":"runtimeType","line":"65","kind":"property"},{"id":"0()","comment":"\nCreates a new [Object] instance.\n\n[Object] instances have no meaningful state, and are only useful\nthrough their identity. An [Object] instance is equal to itself\nonly.\n","name":"","line":"18","kind":"constructor"}],"line":"10","kind":"class"}],"line":"5","kind":"library"}],"id":"undone","comment":"A library for undo and redo.","uri":"file:///home/ubuntu/src/github.com/rmsmith/undone/lib/undone.dart","children":[{"returnType":{"refId":"dart.async/Future","arguments":[{"refId":"dart.core/bool","name":"bool"}],"name":"Future"},"id":"redo0()","comment":"Redo the next action to be redone in the top-level [schedule], if any.\nCompletes `true` if an action was redone or else completes `false`.","name":"redo","line":"54","kind":"method"},{"returnType":{"refId":"dart.async/Future","arguments":[{"refId":"dart.core/bool","name":"bool"}],"name":"Future"},"id":"undo0()","comment":"Undo the next action to be undone in the top-level [schedule], if any.\nCompletes `true` if an action was undone or else completes `false`.","name":"undo","line":"50","kind":"method"},{"returnType":{"refId":"dart.async/Future","name":"Future"},"id":"transact1()","comment":"Build and compute a [Transaction] using the top-level [schedule].\nReturns a Future for the transaction's completion.","name":"transact","children":[{"ref":{"refId":"dart.core/Function","name":"Function"},"id":"build","name":"build","children":[{"returnType":{"refId":"void","name":"void"},"id":"Function","uri":"dart-sdk/lib/core/function.dart","name":"Function","line":"13","kind":"functiontype"}],"kind":"param"}],"line":"32","kind":"method"},{"returnType":{"refId":"undone/Schedule","name":"Schedule"},"id":"schedule0()","comment":"The isolate's top-level [Schedule].","name":"schedule","line":"24","kind":"method"},{"ref":{"refId":"undone/Schedule","name":"Schedule"},"id":"schedule","comment":"The isolate's top-level [Schedule].","name":"schedule","line":"24","kind":"property"},{"ref":{"refId":"undone/Transaction","name":"Transaction"},"id":"_transaction","name":"_transaction","isPrivate":true,"line":"29","kind":"variable"},{"ref":{"refId":"undone/Schedule","name":"Schedule"},"id":"_schedule","name":"_schedule","isPrivate":true,"line":"22","kind":"variable"},{"ref":{"refId":"logging/Logger","name":"Logger"},"id":"_logger","name":"_logger","isPrivate":true,"line":"20","kind":"variable"},{"superclass":{"refId":"dart.core/Object","name":"Object"},"id":"Schedule","comment":"An asynchronous schedule of actions.\n\nA schedule is a function that can be [call]ed with [Action]s.  The order \nof such calls is preserved in a history to allow for [undo] and [redo].  An \naction may be scheduled at any time; if the schedule is not [busy] then it \nwill be called immediately, otherwise it will be queued to be called as soon \nas possible.  Methods to change the history such as [undo] and [redo] can \n_not_ be invoked when the schedule is [busy].  This ensures that all queued \nactions are called and the schedule reaches an idle state before the history \nmay be modified.  Each schedule is a state machine, and its [states] are \nobservable as a stream; this provides a convenient means to connect a user \ninterface to the history control methods.","name":"Schedule","children":[{"isSetter":true,"id":"_error=1()","name":"_error=","isPrivate":true,"children":[{"id":"e","name":"e","kind":"param"}],"line":"253","kind":"method"},{"isSetter":true,"id":"_state=1()","name":"_state=","isPrivate":true,"children":[{"ref":{"refId":"dart.core/String","name":"String"},"id":"nextState","name":"nextState","kind":"param"}],"line":"260","kind":"method"},{"returnType":{"refId":"dart.async/Future","name":"Future"},"id":"call1()","comment":"Schedule the given [action] to be called.  If this schedule is not [busy], \nthe action will be called immediately.  Else, the action will be deferred \nin order behind any other pending actions to be called once this schedule \nreaches an idle state.","name":"call","children":[{"ref":{"refId":"undone/Action","name":"Action"},"id":"action","name":"action","kind":"param"}],"line":"276","kind":"method"},{"returnType":{"refId":"dart.core/bool","name":"bool"},"id":"clear0()","comment":"Clears this schedule if [canClear] is `true` at this time and returns\n`true` if the operation succeeds or `false` if it does not succeed.","name":"clear","line":"296","kind":"method"},{"returnType":{"refId":"dart.async/Future","name":"Future"},"id":"_do1()","name":"_do","isPrivate":true,"children":[{"id":"action","name":"action","kind":"param"}],"line":"311","kind":"method"},{"returnType":{"refId":"dart.async/Future","name":"Future"},"id":"_flush0()","name":"_flush","isPrivate":true,"line":"343","kind":"method"},{"returnType":{"refId":"void","name":"void"},"id":"_log1()","name":"_log","isPrivate":true,"children":[{"ref":{"refId":"dart.core/Function","name":"Function"},"id":"message","name":"message","children":[{"returnType":{"refId":"dart.core/String","name":"String"},"id":"Function","uri":"dart-sdk/lib/core/function.dart","name":"Function","line":"13","kind":"functiontype"}],"kind":"param"}],"line":"373","kind":"method"},{"returnType":{"refId":"dart.async/Future","arguments":[{"refId":"dart.core/bool","name":"bool"}],"name":"Future"},"id":"redo0()","comment":"Redo the next action to be redone in this schedule, if any.\nCompletes `true` if an action was redone or else completes `false`.","name":"redo","line":"384","kind":"method"},{"returnType":{"refId":"dart.async/Future","arguments":[{"refId":"dart.core/bool","name":"bool"}],"name":"Future"},"id":"to1()","comment":"Undo or redo all ordered actions in this schedule until the given [action] \nis done.  The state of the schedule after this operation is equal to the \nstate upon completion of the given action. Completes `false` if any undo \nor redo operations performed complete `false`, if the schedule does not \ncontain the given action, or if the schedule is [busy].","name":"to","children":[{"id":"action","name":"action","kind":"param"}],"line":"417","kind":"method"},{"returnType":{"refId":"void","name":"void"},"id":"_to2()","name":"_to","isPrivate":true,"children":[{"id":"action","name":"action","kind":"param"},{"id":"completer","name":"completer","kind":"param"}],"line":"429","kind":"method"},{"returnType":{"refId":"dart.async/Future","arguments":[{"refId":"dart.core/bool","name":"bool"}],"name":"Future"},"id":"undo0()","comment":"Undo the next action to be undone in this schedule, if any.\nCompletes `true` if an action was undone or else completes `false`.","name":"undo","line":"459","kind":"method"},{"returnType":{"refId":"dart.async/Future","arguments":[{"refId":"dart.core/String","name":"String"}],"name":"Future"},"id":"wait1()","comment":"Wait for this schedule to reach the given [state].\nCompletes on the next transition to the given state, or immediately if the \nstate is the current state of this schedule.","name":"wait","children":[{"ref":{"refId":"dart.core/String","name":"String"},"id":"state","name":"state","kind":"param"}],"line":"489","kind":"method"},{"ref":{"refId":"dart.core/bool","name":"bool"},"id":"busy","comment":"Whether or not this schedule is busy performing another action.\nThis is always `true` when called from any continuations that are\nchained to Futures returned by methods on this schedule.\nThis is also `true` if this schedule has an [error].","name":"busy","line":"233","kind":"property"},{"ref":{"refId":"dart.core/bool","name":"bool"},"id":"canClear","comment":"Whether or not this schedule can be [clear]ed at the present time.","name":"canClear","line":"236","kind":"property"},{"ref":{"refId":"dart.core/bool","name":"bool"},"id":"_canRedo","name":"_canRedo","isPrivate":true,"line":"238","kind":"property"},{"ref":{"refId":"dart.core/bool","name":"bool"},"id":"canRedo","comment":"Whether or not the [redo] method may be called at the present time.","name":"canRedo","line":"240","kind":"property"},{"ref":{"refId":"dart.core/bool","name":"bool"},"id":"_canUndo","name":"_canUndo","isPrivate":true,"line":"242","kind":"property"},{"ref":{"refId":"dart.core/bool","name":"bool"},"id":"canUndo","comment":"Whether or not the [undo] method may be called at the present time.","name":"canUndo","line":"244","kind":"property"},{"ref":{"refId":"dart.core/bool","name":"bool"},"id":"hasError","comment":"Whether or not this schedule has an [error].","name":"hasError","line":"247","kind":"property"},{"id":"error","comment":"The current error, if [hasError] is `true`.  This schedule will remain\n[busy] for as long as this schedule [hasError].  You may [clear] this\nschedule after dealing with the error condition in order to use it again.","name":"error","line":"252","kind":"property"},{"ref":{"refId":"dart.core/String","name":"String"},"id":"_state","name":"_state","isPrivate":true,"line":"259","kind":"property"},{"ref":{"refId":"dart.async/Stream","arguments":[{"refId":"dart.core/String","name":"String"}],"name":"Stream"},"id":"states","comment":"An observable stream of this schedule's state transitions.","name":"states","line":"270","kind":"property"},{"ref":{"refId":"dart.core/String","name":"String"},"isStatic":true,"id":"STATE_IDLE","comment":"A schedule is idle (not busy).","name":"STATE_IDLE","line":"208","kind":"variable"},{"ref":{"refId":"dart.core/String","name":"String"},"isStatic":true,"id":"STATE_CALL","comment":"A schedule is busy executing a new action.","name":"STATE_CALL","line":"210","kind":"variable"},{"ref":{"refId":"dart.core/String","name":"String"},"isStatic":true,"id":"STATE_FLUSH","comment":"A schedule is busy flushing pending actions.","name":"STATE_FLUSH","line":"212","kind":"variable"},{"ref":{"refId":"dart.core/String","name":"String"},"isStatic":true,"id":"STATE_REDO","comment":"A schedule is busy performing a redo operation.","name":"STATE_REDO","line":"214","kind":"variable"},{"ref":{"refId":"dart.core/String","name":"String"},"isStatic":true,"id":"STATE_UNDO","comment":"A schedule is busy performing an undo operation.","name":"STATE_UNDO","line":"216","kind":"variable"},{"ref":{"refId":"dart.core/String","name":"String"},"isStatic":true,"id":"STATE_TO","comment":"A schedule is busy performing a to operation.","name":"STATE_TO","line":"218","kind":"variable"},{"ref":{"refId":"dart.core/String","name":"String"},"isStatic":true,"id":"STATE_ERROR","comment":"A schedule has an error.","name":"STATE_ERROR","line":"220","kind":"variable"},{"isFinal":true,"id":"_actions","name":"_actions","isPrivate":true,"line":"222","kind":"variable"},{"isFinal":true,"id":"_pending","name":"_pending","isPrivate":true,"line":"224","kind":"variable"},{"ref":{"refId":"dart.core/int","name":"int"},"id":"_nextUndo","name":"_nextUndo","isPrivate":true,"line":"225","kind":"variable"},{"ref":{"refId":"dart.core/String","name":"String"},"id":"_currState","name":"_currState","isPrivate":true,"line":"226","kind":"variable"},{"id":"_err","name":"_err","isPrivate":true,"line":"227","kind":"variable"},{"isFinal":true,"id":"_states","name":"_states","isPrivate":true,"line":"268","kind":"variable"}],"line":"206","kind":"class"},{"superclass":{"refId":"undone/Action","name":"Action"},"id":"Transaction","comment":"A sequence of actions that are done and undone together as if one action.\n\nA transaction is itself an action that may be [call]ed on a schedule.\nWhen a transaction is scheduled to be done or undone it will do or undo\nall of its actions in sequence.  Any errors that occur when doing one of\nits actions will cause the transaction to attempt to undo all of its actions\nthat were done prior to the error; this is known as rollback.  These errors\nwill be wrapped in a [TransactionError] and completed to the caller.","name":"Transaction","children":[{"returnType":{"refId":"dart.async/Future","name":"Future"},"isStatic":true,"id":"_do_1()","name":"_do_","isPrivate":true,"children":[{"ref":{"refId":"dart.core/List","arguments":[{"refId":"undone/Action","name":"Action"}],"name":"List"},"id":"actions","name":"actions","kind":"param"}],"line":"159","kind":"method"},{"returnType":{"refId":"dart.async/Future","name":"Future"},"isStatic":true,"id":"_undo_2()","name":"_undo_","isPrivate":true,"children":[{"ref":{"refId":"dart.core/List","arguments":[{"refId":"undone/Action","name":"Action"}],"name":"List"},"id":"actions","name":"actions","kind":"param"},{"id":"_","name":"_","isPrivate":true,"kind":"param"}],"line":"184","kind":"method"},{"returnType":{"refId":"void","name":"void"},"id":"add1()","comment":"Adds the given [action] to this transaction.","name":"add","children":[{"ref":{"refId":"undone/Action","name":"Action"},"id":"action","name":"action","kind":"param"}],"line":"191","kind":"method"},{"id":"0()","comment":"Constructs a new empty transaction.","name":"","line":"188","kind":"constructor"}],"line":"157","kind":"class"},{"superclass":{"refId":"dart.core/Object","name":"Object"},"id":"TransactionError","comment":"An error encountered during a transaction.","name":"TransactionError","children":[{"id":"rollbackError","comment":"An error encountered during transaction rollback; may be `null` if none.","name":"rollbackError","line":"144","kind":"property"},{"isFinal":true,"id":"cause","comment":"The caught object that caused the transaction to err.","name":"cause","line":"141","kind":"variable"},{"id":"_rollbackError","name":"_rollbackError","isPrivate":true,"line":"142","kind":"variable"},{"id":"1()","comment":"Constructs a new transaction error with the given cause.","name":"","children":[{"initializedField":{"refId":"undone/TransactionError/cause","name":"cause"},"id":"cause","name":"cause","kind":"param"}],"line":"146","kind":"constructor"}],"line":"139","kind":"class"},{"superclass":{"refId":"dart.core/Object","name":"Object"},"id":"Action","comment":"An action that can be done and undone.\n\nActions are comprised of a pair of functions: one to [Do] the action and\nanother to [Undo] the action.  The action object is itself a function that \ncan be [call]ed to schedule it to be done on the top-level [schedule] or\nto add it to a [Transaction] if called within the scope of [transact].\nActions may also be constructed with a pair of [DoAsync] and [UndoAsync]\nfunctions using the [new Action.async] constructor.  All actions are done\nand undone asynchronously, regardless of the functions themselves.  Actions\nmay be optionally typed by their argument and result objects, [A] and [R].\nThe action type may be extended to define custom actions although this may\noften not be necessary; constructing an action with the functions to do and\nundo the desired operation is often the simplest and best approach.","name":"Action","children":[{"returnType":{"refId":"dart.async/Future","arguments":[{"refId":"undone/Action/R","name":"R"}],"name":"Future"},"id":"call0()","comment":"Schedules this action to be called on the top-level [schedule].  If this\naction is called within the scope of a top-level [transact] method it will\ninstead be added to that transaction.  Completes with the result of the\naction in both cases.","name":"call","line":"96","kind":"method"},{"returnType":{"refId":"dart.async/Future","arguments":[{"refId":"undone/Action/R","name":"R"}],"name":"Future"},"id":"_defer0()","name":"_defer","isPrivate":true,"line":"104","kind":"method"},{"returnType":{"refId":"dart.async/Future","arguments":[{"refId":"undone/Action/R","name":"R"}],"name":"Future"},"id":"_execute0()","name":"_execute","isPrivate":true,"line":"111","kind":"method"},{"returnType":{"refId":"dart.async/Future","name":"Future"},"id":"_unexecute0()","name":"_unexecute","isPrivate":true,"line":"133","kind":"method"},{"returnType":{"refId":"dart.core/String","name":"String"},"id":"toString0()","name":"toString","line":"135","kind":"method"},{"ref":{"refId":"undone/Action/A","name":"A"},"isFinal":true,"id":"_arg","name":"_arg","isPrivate":true,"line":"70","kind":"variable"},{"ref":{"refId":"undone/Action/R","name":"R"},"id":"_result","name":"_result","isPrivate":true,"line":"71","kind":"variable"},{"ref":{"refId":"undone/DoAsync","name":"DoAsync"},"isFinal":true,"id":"_do","name":"_do","isPrivate":true,"line":"72","kind":"variable"},{"ref":{"refId":"undone/UndoAsync","name":"UndoAsync"},"isFinal":true,"id":"_undo","name":"_undo","isPrivate":true,"line":"73","kind":"variable"},{"ref":{"refId":"dart.async/Completer","name":"Completer"},"id":"_deferred","name":"_deferred","isPrivate":true,"line":"74","kind":"variable"},{"id":"3()","comment":"Constructs a new action with the given [arg]uments, [Do] function, and \n[Undo] function.  The given synchronous functions are automatically \nwrapped in futures prior to being called on a schedule.","name":"","children":[{"ref":{"refId":"undone/Action/A","name":"A"},"id":"arg","name":"arg","kind":"param"},{"ref":{"refId":"undone/Do","name":"Do"},"id":"d","name":"d","kind":"param"},{"ref":{"refId":"undone/Undo","name":"Undo"},"id":"u","name":"u","kind":"param"}],"line":"79","kind":"constructor"},{"id":"async3()","comment":"Constructs a new action with the given [arg]uments, [DoAsync] function, \nand [UndoAsync] function.","name":"async","children":[{"ref":{"refId":"undone/Action/A","name":"A"},"id":"arg","name":"arg","kind":"param"},{"ref":{"refId":"undone/DoAsync","name":"DoAsync"},"id":"d","name":"d","kind":"param"},{"ref":{"refId":"undone/UndoAsync","name":"UndoAsync"},"id":"u","name":"u","kind":"param"}],"line":"85","kind":"constructor"},{"id":"_3()","name":"_","isPrivate":true,"children":[{"initializedField":{"refId":"undone/Action/_arg","name":"_arg"},"ref":{"refId":"undone/Action/A","name":"A"},"id":"_arg","name":"_arg","isPrivate":true,"kind":"param"},{"initializedField":{"refId":"undone/Action/_do","name":"_do"},"ref":{"refId":"undone/DoAsync","name":"DoAsync"},"id":"_do","name":"_do","isPrivate":true,"kind":"param"},{"initializedField":{"refId":"undone/Action/_undo","name":"_undo"},"ref":{"refId":"undone/UndoAsync","name":"UndoAsync"},"id":"_undo","name":"_undo","isPrivate":true,"kind":"param"}],"line":"87","kind":"constructor"},{"id":"A","name":"A","kind":"typeparam"},{"id":"R","name":"R","kind":"typeparam"}],"line":"69","kind":"class"},{"returnType":{"refId":"dart.async/Future","name":"Future"},"id":"UndoAsync","comment":"A function to undo an async operation on an [arg] given the prior [result].","name":"UndoAsync","children":[{"ref":{"refId":"undone/UndoAsync/A","name":"A"},"id":"arg","name":"arg","kind":"param"},{"ref":{"refId":"undone/UndoAsync/R","name":"R"},"id":"result","name":"result","kind":"param"},{"id":"A","name":"A","kind":"typeparam"},{"id":"R","name":"R","kind":"typeparam"}],"line":"18","kind":"typedef"},{"returnType":{"refId":"void","name":"void"},"id":"Undo","comment":"A function to undo an operation on an [arg] given the prior [result].","name":"Undo","children":[{"ref":{"refId":"undone/Undo/A","name":"A"},"id":"arg","name":"arg","kind":"param"},{"ref":{"refId":"undone/Undo/R","name":"R"},"id":"result","name":"result","kind":"param"},{"id":"A","name":"A","kind":"typeparam"},{"id":"R","name":"R","kind":"typeparam"}],"line":"15","kind":"typedef"},{"returnType":{"refId":"dart.async/Future","arguments":[{"refId":"undone/DoAsync/R","name":"R"}],"name":"Future"},"id":"DoAsync","comment":"A function to do an async operation on an [arg] and complete a result.","name":"DoAsync","children":[{"ref":{"refId":"undone/DoAsync/A","name":"A"},"id":"arg","name":"arg","kind":"param"},{"id":"A","name":"A","kind":"typeparam"},{"id":"R","name":"R","kind":"typeparam"}],"line":"12","kind":"typedef"},{"returnType":{"refId":"undone/Do/R","name":"R"},"id":"Do","comment":"A function to do an operation on an [arg] and return a result.","name":"Do","children":[{"ref":{"refId":"undone/Do/A","name":"A"},"id":"arg","name":"arg","kind":"param"},{"id":"A","name":"A","kind":"typeparam"},{"id":"R","name":"R","kind":"typeparam"}],"line":"9","kind":"typedef"}],"line":"3","kind":"library"}